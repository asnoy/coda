Summary: RPC2 library
Name: @PACKAGE@
Version: @VERSION@
Release: 1
Source: ftp://ftp.coda.cs.cmu.edu/pub/coda/src/%{name}-%{version}.tar.gz
License: LGPL
BuildRequires: lwp-devel lua-devel
BuildRoot: %{_builddir}/%{name}-%{version}/Root
Group: Development/Libraries
%description
The RPC2 library.

%package devel
Summary: RPC2 library development files
Group: Development/Libraries
%description devel
Headers and static libraries for developing programs using the RPC2 library.

%changelog
* Thu Oct 28 1999 Jan Harkes <jaharkes@cs.cmu.edu>
- First stab at packaging the rpc2 library.

%prep
%setup -n %{name}-%{version}

%build
./configure --prefix=/usr --with-lua
make

%install
rm -rf $RPM_BUILD_ROOT
mkdir -p $RPM_BUILD_ROOT
make prefix=$RPM_BUILD_ROOT/usr install
chmod 755 $RPM_BUILD_ROOT/usr/lib/librpc2.so.@LINUX_VERSION@
chmod 755 $RPM_BUILD_ROOT/usr/lib/libse.so.@LINUX_VERSION@
rm -f $RPM_BUILD_ROOT/usr/lib/librpc2.so.@MAJOR_VERSION@
rm -f $RPM_BUILD_ROOT/usr/lib/libse.so.@MAJOR_VERSION@

%clean
rm -rf $RPM_BUILD_ROOT

%post
/sbin/ldconfig

%postun
/sbin/ldconfig

%files
%defattr(-,root,root)
/usr/lib/librpc2.so.@LINUX_VERSION@
/usr/lib/libse.so.@LINUX_VERSION@
%dir /usr/share/rpc2
/usr/share/rpc2/rpc2-fail.lua
/usr/share/rpc2/rpc2-rtt-adaptive.lua
/usr/share/rpc2/rpc2-rtt-fixed.lua
/usr/share/rpc2/rpc2-rtt-vj.lua

%files devel
%defattr(-,root,root)
/usr/bin/rp2gen
/usr/lib/librpc2.a
/usr/lib/librpc2.la
/usr/lib/librpc2.so
/usr/lib/libse.a
/usr/lib/libse.la
/usr/lib/libse.so
%dir /usr/include/rpc2
/usr/include/rpc2/errors.h
/usr/include/rpc2/errorsdefs.h
/usr/include/rpc2/multi.h
/usr/include/rpc2/rpc2.h
/usr/include/rpc2/rpc2_addrinfo.h
/usr/include/rpc2/se.h
/usr/include/rpc2/sftp.h
/usr/include/rpc2/secure.h

